## Введение

Первый релиз Symfony2 поставлялся вместе с 
[Doctrine Common library](http://docs.doctrine-project.org/projects/doctrine-common/en/latest/). Эта библиотека
содержит некоторые инструменты, используемые в проектах Doctrine второго поколения, напрмер в Doctrine ORM,
Doctrine MongoDB ODM и т.д. Эта библиотека содержит функции и полезные классы, такие как менеджер событий,
интерфейсы, касающиеся персистентности, некоторые полезные базовые классы и "считыватель" аннотаций 
(annotation reader).

Этот считыватель изначально использовался только в Doctrine ORM для парсинга аннотаций в классах сущностей. 
Doctrine ORM (Doctrine2) использует аннотациии в качестве способа определения соответствия между PHP-классами и
таблицами в реляционной СУБД:

{lang="php"}
~~~~~~~~~~~~
use Doctrine\ORM\Mapping as ORM;

/**
 * @ORM\Entity
 */
class User
{
    /**
     * @ORM\Column(type="string")
     */
    private $name;
}
~~~~~~~~~~~~

Этот "синтаксический сахар" вскоре был признан очень удобной альтернативой существующим способам определения
маппинга, таким как описание конфигураций в Yaml или XML файлах. Создатели Symfony2 вдохновились 
использованием аннотаций и начали добавлять их в свои компоненты в качестве альтернативного способа определения
конфигурации. Например, компонент Validator поддерживает аннотации для настройки правил валидации классов. Компонет 
Routing также поддерживает аннотации для связывания маршрутов с классами и их методами.

> ##### Аннотации: Предметно-ориентированные языки
> 
> Аннотации имеют весьма интересные характеристики. Они пишутся не на PHP: 
> `@Route("/admin/", name="admin_index")` - этот текст не может быть распарсен интерпритатором PHP.
> И всё-же, аннотации имеют отношение к рантайму, так как они парсятся при помощи "считывателя" аннотаций
> во время выполнения PHP-приложения. Само их присутствие имеет вполне реальные эффекты на процесс выполнения
> приложения.
>
> Более того, писать аннотации просто. Узнав все атрибуты, которые поддерживают аннотации, вы будете знать
> всё необходимое, чтобы использовать их в своём приложении. И самое интересное тут то, что вам не обязательно
> быть PHP-программистом, чтобы использовать аннотации, так как в конечном итоге, используя их, PHP код вы не
> пишете.
>
> И, наконец, аннотации всегда предметно-ориентированы (domain-specific). Они изначально были введены, чтобы
> передать некоторую высокоуровневую концепцию для определённой предметной области, например маршрутизатора,
> шаблонизатора, хранилища и т.д. Аннотации помогают абстрагироваться от деталей и мыслить более высокоуровневыми
> категориями.
>
> Эти характеристики приводят нас к следущему выводу: аннотации следует рассматривать в качестве одной из
> форм предметно-оринтированных языков ([DSL](http://martinfowler.com/books/dsl.html)). DSL это небольшой язык,
> используемый для перевода высокоуровневых концепций в низкоуровневые детали. Этого можно добиться при помощи
> языков общего назначения вроде PHP, но также можно использовать отдельный синтаксис (в данном случае - синтаксис
> аннотаций).

Каждый набор предметно-ориентированных аннотаций образует язык конкретной предметной области, отражающий 
детали, из которых состоят высокоуровневые концепции. Например, аннотации, предоставляемые Doctrine ORM - это
небольшой язык, который описывает в классе сущности (на высоком уровне) что должно произойти на низком уровне,
чтобы этот уровень был готов для хранения объектов. Это означает, что когда вы используете аннотации Doctrine для 
конфигурирования маппинга сущности - вы не беспокоитесь по поводу реализации деталей вроде таких - как лучше определить
колонку с булевым занчением или какой синтаксис использовать для "обязательных" значений.

Когда я в первые начал работать с Symfony2, я увидел, что все спользуют аннотации, сам же я не решался их 
использовать. Мне казалось довольно опасным использовать комментарии для управления приложением. Затем,
спустя несколько месяцев, я привык к работе с аннотациями и ни разу не столкнулся с проблемами при их использовании
(@dbykadorov: вообще говоря я сталкивался - был один момент, когда популярный тогда ещё eaccelerator вырезал 
док-блоки и делал аннотации полностью нефункциональными. Но, строго говоря, это не проблема аннотаций как таковых).
Вместо этого я изучил аннотации: что они из себя представляют и как они используются в Symfony и Doctrine. Вскоре
я начал создавать свои собственные приложения и использовал аннотации в различных ситуациях. 

В этой главе вы узнаете о том, как устроены аннотации и как вы можете создавать их самостоятельно. 
В последней главе этой части я покажу вам специфичные для Symfony случаи, когда вы можете использовать аннотации 
для того, чтобы влиять на процесс выполнения приложения.